// src/config.ts
import { z } from "zod";
import * as dotenv from "dotenv";
dotenv.config();
var zConfig = z.object({
  OAUTH_CALLBACK: z.string().url(),
  // CLIENT_ID: z.string(),
  // CLIENT_SECRET: z.string(),
  CONSUMER_KEY: z.string(),
  CONSUMER_SECRET: z.string(),
  PORT: z.string(),
  CACHE_PORT: z.string(),
  STREAM_PORT: z.string(),
  GBS_LIST: z.string().url(),
  REDIS_HOST: z.string(),
  REDIS_PORT: z.string(),
  REDIS_PASS: z.string()
});
var env = zConfig.parse(process.env);

// src/redis/index.ts
import Redis from "ioredis";

// src/redis/schema.ts
import { z as z2 } from "zod";
var zRawRaidTweetMini = z2.object({
  n: z2.string(),
  // name
  sn: z2.string(),
  // screen_name
  en: z2.string(),
  // enemy_name
  ui: z2.number(),
  // user_id
  ti: z2.number(),
  // tweet_id
  bi: z2.string(),
  // battle_id
  lv: z2.string(),
  // level
  l: z2.enum(["en", "ja"]),
  // language
  t: z2.number(),
  // time
  c: z2.string().optional()
  // comment
});
function minifyRawRaidTweet(tweet) {
  return {
    n: tweet.name,
    sn: tweet.screen_name,
    en: tweet.enemy_name,
    ui: tweet.user_id,
    ti: tweet.tweet_id,
    bi: tweet.battle_id,
    lv: tweet.level,
    l: tweet.language,
    t: tweet.time,
    c: tweet.comment
  };
}
function unpackRawRaidTweetMini(mini) {
  return {
    name: mini.n,
    screen_name: mini.sn,
    enemy_name: mini.en,
    user_id: mini.ui,
    tweet_id: mini.ti,
    battle_id: mini.bi,
    level: mini.lv,
    language: mini.l,
    time: mini.t,
    comment: mini.c
  };
}
var zRaidTweetMini = z2.object({
  n: z2.string(),
  // name
  sn: z2.string(),
  // screen_name
  ui: z2.number(),
  // user_id
  ti: z2.number(),
  // tweet_id
  bi: z2.string(),
  // battle_id
  ei: z2.number(),
  // enemy_id(-1はリスト外)
  lv: z2.string().optional(),
  // level
  en: z2.string().optional(),
  // enemy_name
  l: z2.enum(["en", "ja"]),
  // language
  t: z2.number(),
  // time
  ft: z2.number(),
  // first time(初回投稿時間)
  c: z2.string().optional()
  // comment
});

// src/redis/index.ts
import mitt from "mitt";
var redisOps = {
  host: env.REDIS_HOST,
  password: env.REDIS_PASS,
  port: Number.parseInt(env.REDIS_PORT)
};
function getRawChClient() {
  const receiver = mitt();
  const subRedis = new Redis(redisOps);
  subRedis.subscribe("gbs-open-raw");
  subRedis.on("message", (ch, json) => {
    try {
      const mini = zRawRaidTweetMini.parse(JSON.parse(json));
      receiver.emit("tweet", mini);
    } catch {
    }
  });
  return receiver;
}
function getRaidTweetChClient() {
  const receiver = mitt();
  const subRedis = new Redis(redisOps);
  subRedis.subscribe("gbs-open-tweet");
  subRedis.on("message", (ch, json) => {
    try {
      const mini = zRaidTweetMini.parse(JSON.parse(json));
      receiver.emit("tweet", mini);
    } catch {
    }
  });
  return receiver;
}
var pubRedis = new Redis(redisOps);
function sendRawRaidTweet(tweet) {
  const mini = minifyRawRaidTweet(tweet);
  const json = JSON.stringify(mini);
  pubRedis.publish("gbs-open-raw", json);
}
function sendRaidTweet(tweet) {
  const json = JSON.stringify(tweet);
  pubRedis.publish("gbs-open-tweet", json);
}

// src/tweet/receiver.ts
import mitt2 from "mitt";
import { parse } from "@totoraj930/gbf-tweet-parser";
import { TwitterApi } from "twitter-api-v2";

// src/db.ts
import { PrismaClient } from "@prisma/client";
import { v4 as uuid } from "uuid";
var prisma = new PrismaClient();

// src/tweet/receiver.ts
var tweetReceiver = mitt2();
export {
  env,
  getRaidTweetChClient,
  getRawChClient,
  minifyRawRaidTweet,
  redisOps,
  sendRaidTweet,
  sendRawRaidTweet,
  unpackRawRaidTweetMini,
  zConfig,
  zRaidTweetMini,
  zRawRaidTweetMini
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvbmZpZy50cyIsICIuLi9zcmMvcmVkaXMvaW5kZXgudHMiLCAiLi4vc3JjL3JlZGlzL3NjaGVtYS50cyIsICIuLi9zcmMvdHdlZXQvcmVjZWl2ZXIudHMiLCAiLi4vc3JjL2RiLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcclxuaW1wb3J0ICogYXMgZG90ZW52IGZyb20gJ2RvdGVudic7XHJcbmRvdGVudi5jb25maWcoKTtcclxuXHJcbmV4cG9ydCBjb25zdCB6Q29uZmlnID0gei5vYmplY3Qoe1xyXG4gIE9BVVRIX0NBTExCQUNLOiB6LnN0cmluZygpLnVybCgpLFxyXG4gIC8vIENMSUVOVF9JRDogei5zdHJpbmcoKSxcclxuICAvLyBDTElFTlRfU0VDUkVUOiB6LnN0cmluZygpLFxyXG4gIENPTlNVTUVSX0tFWTogei5zdHJpbmcoKSxcclxuICBDT05TVU1FUl9TRUNSRVQ6IHouc3RyaW5nKCksXHJcbiAgUE9SVDogei5zdHJpbmcoKSxcclxuXHJcbiAgQ0FDSEVfUE9SVDogei5zdHJpbmcoKSxcclxuICBTVFJFQU1fUE9SVDogei5zdHJpbmcoKSxcclxuXHJcbiAgR0JTX0xJU1Q6IHouc3RyaW5nKCkudXJsKCksXHJcblxyXG4gIFJFRElTX0hPU1Q6IHouc3RyaW5nKCksXHJcbiAgUkVESVNfUE9SVDogei5zdHJpbmcoKSxcclxuICBSRURJU19QQVNTOiB6LnN0cmluZygpLFxyXG59KTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbnYgPSB6Q29uZmlnLnBhcnNlKHByb2Nlc3MuZW52KTtcclxuIiwgImltcG9ydCB7IGVudiB9IGZyb20gJ0AvY29uZmlnJztcclxuaW1wb3J0IHsgUmF3UmFpZFR3ZWV0IH0gZnJvbSAnQC90d2VldC9yZWNlaXZlcic7XHJcbmltcG9ydCBSZWRpcywgeyBSZWRpc09wdGlvbnMgfSBmcm9tICdpb3JlZGlzJztcclxuaW1wb3J0IHtcclxuICBtaW5pZnlSYXdSYWlkVHdlZXQsXHJcbiAgUmFpZFR3ZWV0TWluaSxcclxuICBSYXdSYWlkVHdlZXRNaW5pLFxyXG4gIHVucGFja1Jhd1JhaWRUd2VldE1pbmksXHJcbiAgelJhaWRUd2VldE1pbmksXHJcbiAgelJhd1JhaWRUd2VldE1pbmksXHJcbn0gZnJvbSAnLi9zY2hlbWEnO1xyXG5pbXBvcnQgbWl0dCBmcm9tICdtaXR0JztcclxuXHJcbmV4cG9ydCBjb25zdCByZWRpc09wcyA9IHtcclxuICBob3N0OiBlbnYuUkVESVNfSE9TVCxcclxuICBwYXNzd29yZDogZW52LlJFRElTX1BBU1MsXHJcbiAgcG9ydDogTnVtYmVyLnBhcnNlSW50KGVudi5SRURJU19QT1JUKSxcclxufTtcclxuXHJcbnR5cGUgUmF3Q2hFdmVudHMgPSB7XHJcbiAgdHdlZXQ6IFJhd1JhaWRUd2VldE1pbmk7XHJcbn07XHJcbi8qKlxyXG4gKiBcdTc1MUZcdTMwNkVcdTMwQzRcdTMwQTRcdTMwRkNcdTMwQzhcdTUzRDdcdTRGRTFcdTZBNUZcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYXdDaENsaWVudCgpIHtcclxuICBjb25zdCByZWNlaXZlciA9IG1pdHQ8UmF3Q2hFdmVudHM+KCk7XHJcbiAgY29uc3Qgc3ViUmVkaXMgPSBuZXcgUmVkaXMocmVkaXNPcHMpO1xyXG4gIHN1YlJlZGlzLnN1YnNjcmliZSgnZ2JzLW9wZW4tcmF3Jyk7XHJcbiAgc3ViUmVkaXMub24oJ21lc3NhZ2UnLCAoY2gsIGpzb24pID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IG1pbmkgPSB6UmF3UmFpZFR3ZWV0TWluaS5wYXJzZShKU09OLnBhcnNlKGpzb24pKTtcclxuICAgICAgLy8gY29uc29sZS5sb2coRGF0ZS5ub3coKSAtIG1pbmkudCwgbWluaS5iaSwgYEx2LiR7bWluaS5sdn1gLCBtaW5pLmVuKTtcclxuICAgICAgcmVjZWl2ZXIuZW1pdCgndHdlZXQnLCBtaW5pKTtcclxuICAgIH0gY2F0Y2gge31cclxuICB9KTtcclxuICByZXR1cm4gcmVjZWl2ZXI7XHJcbn1cclxuXHJcbnR5cGUgUmFpZFR3ZWV0Q2hFdmVudHMgPSB7XHJcbiAgdHdlZXQ6IFJhaWRUd2VldE1pbmk7XHJcbn07XHJcbi8qKlxyXG4gKiBcdTVCOENcdTYyMTBcdTZFMDhcdTMwN0ZcdTMwNkVcdTMwQzRcdTMwQTRcdTMwRkNcdTMwQzhcdTUzRDdcdTRGRTFcdTZBNUZcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRSYWlkVHdlZXRDaENsaWVudCgpIHtcclxuICBjb25zdCByZWNlaXZlciA9IG1pdHQ8UmFpZFR3ZWV0Q2hFdmVudHM+KCk7XHJcbiAgY29uc3Qgc3ViUmVkaXMgPSBuZXcgUmVkaXMocmVkaXNPcHMpO1xyXG4gIHN1YlJlZGlzLnN1YnNjcmliZSgnZ2JzLW9wZW4tdHdlZXQnKTtcclxuICBzdWJSZWRpcy5vbignbWVzc2FnZScsIChjaCwganNvbikgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgbWluaSA9IHpSYWlkVHdlZXRNaW5pLnBhcnNlKEpTT04ucGFyc2UoanNvbikpO1xyXG4gICAgICByZWNlaXZlci5lbWl0KCd0d2VldCcsIG1pbmkpO1xyXG4gICAgfSBjYXRjaCB7fVxyXG4gIH0pO1xyXG4gIHJldHVybiByZWNlaXZlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1OTAwMVx1NEZFMVx1NzUyOFJlZGlzXHUzMEFGXHUzMEU5XHUzMEE0XHUzMEEyXHUzMEYzXHUzMEM4XHJcbiAqL1xyXG5jb25zdCBwdWJSZWRpcyA9IG5ldyBSZWRpcyhyZWRpc09wcyk7XHJcblxyXG4vKipcclxuICogXHU3NTFGXHUzMDZFXHUzMEM0XHUzMEE0XHUzMEZDXHUzMEM4XHUzMEM3XHUzMEZDXHUzMEJGXHUzMDkyXHU5MDAxXHU0RkUxXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFJhd1JhaWRUd2VldCh0d2VldDogUmF3UmFpZFR3ZWV0KSB7XHJcbiAgY29uc3QgbWluaSA9IG1pbmlmeVJhd1JhaWRUd2VldCh0d2VldCk7XHJcbiAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KG1pbmkpO1xyXG4gIHB1YlJlZGlzLnB1Ymxpc2goJ2dicy1vcGVuLXJhdycsIGpzb24pO1xyXG59XHJcblxyXG4vKipcclxuICogXHU1MkEwXHU1REU1XHU2RTA4XHUzMDdGXHUzMDZFXHUzMEM0XHUzMEE0XHUzMEZDXHUzMEM4XHUzMEM3XHUzMEZDXHUzMEJGXHUzMDkyXHU5MDAxXHU0RkUxXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2VuZFJhaWRUd2VldCh0d2VldDogUmFpZFR3ZWV0TWluaSkge1xyXG4gIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeSh0d2VldCk7XHJcbiAgcHViUmVkaXMucHVibGlzaCgnZ2JzLW9wZW4tdHdlZXQnLCBqc29uKTtcclxufVxyXG4iLCAiaW1wb3J0IHsgUmF3UmFpZFR3ZWV0IH0gZnJvbSAnQC90d2VldC9yZWNlaXZlcic7XHJcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xyXG5cclxuLyoqXHJcbiAqIFJlZGlzXHU5MDAxXHU0RkUxXHU3NTI4XHUzMDZFXHU2NTg3XHU1QjU3XHU2NTcwXHUzMDkyXHU2MjkxXHUzMDQ4XHUzMDVGUmFpZFR3ZWV0XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgelJhd1JhaWRUd2VldE1pbmkgPSB6Lm9iamVjdCh7XHJcbiAgbjogei5zdHJpbmcoKSwgLy8gbmFtZVxyXG4gIHNuOiB6LnN0cmluZygpLCAvLyBzY3JlZW5fbmFtZVxyXG4gIGVuOiB6LnN0cmluZygpLCAvLyBlbmVteV9uYW1lXHJcbiAgdWk6IHoubnVtYmVyKCksIC8vIHVzZXJfaWRcclxuICB0aTogei5udW1iZXIoKSwgLy8gdHdlZXRfaWRcclxuICBiaTogei5zdHJpbmcoKSwgLy8gYmF0dGxlX2lkXHJcbiAgbHY6IHouc3RyaW5nKCksIC8vIGxldmVsXHJcbiAgbDogei5lbnVtKFsnZW4nLCAnamEnXSksIC8vIGxhbmd1YWdlXHJcbiAgdDogei5udW1iZXIoKSwgLy8gdGltZVxyXG4gIGM6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gY29tbWVudFxyXG59KTtcclxuZXhwb3J0IHR5cGUgUmF3UmFpZFR3ZWV0TWluaSA9IHouaW5mZXI8dHlwZW9mIHpSYXdSYWlkVHdlZXRNaW5pPjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBtaW5pZnlSYXdSYWlkVHdlZXQodHdlZXQ6IFJhd1JhaWRUd2VldCk6IFJhd1JhaWRUd2VldE1pbmkge1xyXG4gIHJldHVybiB7XHJcbiAgICBuOiB0d2VldC5uYW1lLFxyXG4gICAgc246IHR3ZWV0LnNjcmVlbl9uYW1lLFxyXG4gICAgZW46IHR3ZWV0LmVuZW15X25hbWUsXHJcbiAgICB1aTogdHdlZXQudXNlcl9pZCxcclxuICAgIHRpOiB0d2VldC50d2VldF9pZCxcclxuICAgIGJpOiB0d2VldC5iYXR0bGVfaWQsXHJcbiAgICBsdjogdHdlZXQubGV2ZWwsXHJcbiAgICBsOiB0d2VldC5sYW5ndWFnZSxcclxuICAgIHQ6IHR3ZWV0LnRpbWUsXHJcbiAgICBjOiB0d2VldC5jb21tZW50LFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB1bnBhY2tSYXdSYWlkVHdlZXRNaW5pKG1pbmk6IFJhd1JhaWRUd2VldE1pbmkpOiBSYXdSYWlkVHdlZXQge1xyXG4gIHJldHVybiB7XHJcbiAgICBuYW1lOiBtaW5pLm4sXHJcbiAgICBzY3JlZW5fbmFtZTogbWluaS5zbixcclxuICAgIGVuZW15X25hbWU6IG1pbmkuZW4sXHJcbiAgICB1c2VyX2lkOiBtaW5pLnVpLFxyXG4gICAgdHdlZXRfaWQ6IG1pbmkudGksXHJcbiAgICBiYXR0bGVfaWQ6IG1pbmkuYmksXHJcbiAgICBsZXZlbDogbWluaS5sdixcclxuICAgIGxhbmd1YWdlOiBtaW5pLmwsXHJcbiAgICB0aW1lOiBtaW5pLnQsXHJcbiAgICBjb21tZW50OiBtaW5pLmMsXHJcbiAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1NUI5Rlx1OTY5Qlx1MzA2Qlx1OTE0RFx1NEZFMVx1MzA1NVx1MzA4Q1x1MzA4Qlx1MzBDNFx1MzBBNFx1MzBGQ1x1MzBDOFx1MzBDN1x1MzBGQ1x1MzBCRlxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IHpSYWlkVHdlZXRNaW5pID0gei5vYmplY3Qoe1xyXG4gIG46IHouc3RyaW5nKCksIC8vIG5hbWVcclxuICBzbjogei5zdHJpbmcoKSwgLy8gc2NyZWVuX25hbWVcclxuICB1aTogei5udW1iZXIoKSwgLy8gdXNlcl9pZFxyXG4gIHRpOiB6Lm51bWJlcigpLCAvLyB0d2VldF9pZFxyXG4gIGJpOiB6LnN0cmluZygpLCAvLyBiYXR0bGVfaWRcclxuICBlaTogei5udW1iZXIoKSwgLy8gZW5lbXlfaWQoLTFcdTMwNkZcdTMwRUFcdTMwQjlcdTMwQzhcdTU5MTYpXHJcbiAgbHY6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gbGV2ZWxcclxuICBlbjogei5zdHJpbmcoKS5vcHRpb25hbCgpLCAvLyBlbmVteV9uYW1lXHJcbiAgbDogei5lbnVtKFsnZW4nLCAnamEnXSksIC8vIGxhbmd1YWdlXHJcbiAgdDogei5udW1iZXIoKSwgLy8gdGltZVxyXG4gIGZ0OiB6Lm51bWJlcigpLCAvLyBmaXJzdCB0aW1lKFx1NTIxRFx1NTZERVx1NjI5NVx1N0EzRlx1NjY0Mlx1OTU5MylcclxuICBjOiB6LnN0cmluZygpLm9wdGlvbmFsKCksIC8vIGNvbW1lbnRcclxufSk7XHJcbmV4cG9ydCB0eXBlIFJhaWRUd2VldE1pbmkgPSB6LmluZmVyPHR5cGVvZiB6UmFpZFR3ZWV0TWluaT47XHJcbiIsICJpbXBvcnQgeyBlbnYgfSBmcm9tICdAL2NvbmZpZyc7XHJcbmltcG9ydCBtaXR0IGZyb20gJ21pdHQnO1xyXG5pbXBvcnQgeyBwYXJzZSB9IGZyb20gJ0B0b3RvcmFqOTMwL2diZi10d2VldC1wYXJzZXInO1xyXG5pbXBvcnQgeyBUd2l0dGVyQXBpIH0gZnJvbSAndHdpdHRlci1hcGktdjInO1xyXG5pbXBvcnQgeyBnZXRBY3RpdmVUb2tlbk1hbnksIGRlbGV0ZU9BdXRoRmllbGQgfSBmcm9tICdAL2RiJztcclxuaW1wb3J0IHtcclxuICBnZXRTZWFyY2hQYXJhbSxcclxuICBnZXRUaW1lc3RhbXAsXHJcbiAgaXNFcnJvclYxLFxyXG4gIHYxU2VhcmNoVHdlZXRzLFxyXG59IGZyb20gJy4vc2NoZW1hJztcclxuXHJcbnR5cGUgUmVjZWl2ZXJFdmVudHMgPSB7XHJcbiAgdHdlZXQ6IFJhd1JhaWRUd2VldDtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB0d2VldFJlY2VpdmVyID0gbWl0dDxSZWNlaXZlckV2ZW50cz4oKTtcclxuXHJcbmV4cG9ydCB0eXBlIFJhd1JhaWRUd2VldCA9IHtcclxuICBuYW1lOiBzdHJpbmc7XHJcbiAgc2NyZWVuX25hbWU6IHN0cmluZztcclxuICB1c2VyX2lkOiBudW1iZXI7XHJcbiAgdHdlZXRfaWQ6IG51bWJlcjtcclxuICBiYXR0bGVfaWQ6IHN0cmluZztcclxuICBjb21tZW50Pzogc3RyaW5nO1xyXG4gIGVuZW15X25hbWU6IHN0cmluZztcclxuICBsZXZlbDogc3RyaW5nO1xyXG4gIGxhbmd1YWdlOiAnamEnIHwgJ2VuJztcclxuICB0aW1lOiBudW1iZXI7XHJcbn07XHJcblxyXG50eXBlIENsaWVudCA9IHtcclxuICB0d2l0dGVySWQ6IHN0cmluZztcclxuICB0d2l0OiBUd2l0dGVyQXBpO1xyXG4gIGxpbWl0OiBudW1iZXI7IC8vIFx1NTkxQVx1MzA0NFx1MzA3Qlx1MzA2OVx1NTEyQVx1NTE0OFxyXG4gIHJlc2V0VGltZTogbnVtYmVyO1xyXG4gIGNvdW50OiBudW1iZXI7IC8vIFx1NzNGRVx1NTcyOFx1MzA3RVx1MzA2N1x1MzA2RVx1NEY3Rlx1NzUyOFx1NTZERVx1NjU3MFxyXG59O1xyXG5cclxubGV0IGNsaWVudExpc3Q6IENsaWVudFtdID0gW107XHJcbmxldCBzaW5jZV9pZCA9IDA7XHJcbmxldCBzdGFydEZsYWcgPSBmYWxzZTtcclxubGV0IHRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xyXG5cclxuLyoqXHJcbiAqIFx1MzBBNFx1MzBGM1x1MzBCRlx1MzBGQ1x1MzBEMFx1MzBFQlx1NjY0Mlx1OTU5M1x1MzA5Mlx1OEEwOFx1N0I5N1x1MzA1OVx1MzA4QlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEludGVydmFsVGltZSgpIHtcclxuICBsZXQgc3VtTGltaXQgPSAwO1xyXG4gIGxldCBzdW1UaW1lID0gMDtcclxuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xyXG4gIGZvciAoY29uc3QgYyBvZiBjbGllbnRMaXN0KSB7XHJcbiAgICBzdW1MaW1pdCArPSBjLmxpbWl0O1xyXG4gICAgc3VtVGltZSArPSBjLnJlc2V0VGltZSAtIG5vdztcclxuICB9XHJcbiAgY29uc3QgdXNlck51bSA9IGNsaWVudExpc3QubGVuZ3RoO1xyXG4gIC8vIFx1NTQwNFx1MzBFNlx1MzBGQ1x1MzBCNlx1MzBGQ1x1MzA2RVx1NjcwMFx1NTkyN1x1NEY3Rlx1NzUyOFx1NTZERVx1NjU3MFx1MzA5MjUwXHU1NkRFXHUzMDY4XHUzMDU3XHUzMDVGXHUzMDY4XHUzMDREXHUzMDZFXHU2NzAwXHU1QzBGbXNcclxuICBjb25zdCBsaW1pdDUwID0gKDEwMDAgKiA2MCAqIDE1KSAvICg1MCAqIHVzZXJOdW0pO1xyXG4gIHJldHVybiBNYXRoLm1heCg4MDAsIE1hdGgubWF4KGxpbWl0NTAsIHN1bVRpbWUgLyBzdW1MaW1pdCAvIHVzZXJOdW0pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0YXJ0KCkge1xyXG4gIGlmICh0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuICBzdGFydEZsYWcgPSB0cnVlO1xyXG4gIHRhc2soKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0b3AoKSB7XHJcbiAgaWYgKHRpbWVyKSBjbGVhclRpbWVvdXQodGltZXIpO1xyXG4gIHN0YXJ0RmxhZyA9IGZhbHNlO1xyXG59XHJcblxyXG4vKipcclxuICogXHUzMEE0XHUzMEYzXHUzMEJGXHUzMEZDXHUzMEQwXHUzMEVCXHUzMDU0XHUzMDY4XHUzMDZCXHU1QjlGXHU4ODRDXHUzMDU1XHUzMDhDXHUzMDhCXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGFzaygpIHtcclxuICBsZXQgcmVzID0gbnVsbDtcclxuICB0cnkge1xyXG4gICAgcmVzID0gYXdhaXQgZ2V0VHdlZXQoKTtcclxuICB9IGNhdGNoIHt9XHJcbiAgaWYgKHJlcyA9PT0gbnVsbCkge1xyXG4gICAgaWYgKHN0YXJ0RmxhZykge1xyXG4gICAgICB0aW1lciA9IHNldFRpbWVvdXQodGFzaywgMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGZvciAobGV0IGkgPSByZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgIHR3ZWV0UmVjZWl2ZXIuZW1pdCgndHdlZXQnLCByZXNbaV0pO1xyXG4gIH1cclxuICBpZiAoc3RhcnRGbGFnKSB7XHJcbiAgICBjb25zdCBpbnRlcnZhbFRpbWUgPSBnZXRJbnRlcnZhbFRpbWUoKTtcclxuICAgIGNvbnNvbGUubG9nKGdldFRpbWVzdGFtcCgpLCBpbnRlcnZhbFRpbWUpO1xyXG4gICAgdGltZXIgPSBzZXRUaW1lb3V0KHRhc2ssIGludGVydmFsVGltZSk7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogXHU0RjRFXHUzMDQ0XHUzMDdCXHUzMDY5XHU1MTJBXHU1MTQ4XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY29yZShjbGllbnQ6IENsaWVudCkge1xyXG4gIHJldHVybiAoY2xpZW50LnJlc2V0VGltZSAtIERhdGUubm93KCkpIC8gY2xpZW50LmxpbWl0O1xyXG59XHJcblxyXG4vKipcclxuICogXHU0RjdGXHU3NTI4XHUzMDU5XHUzMDhCXHUzMEFGXHUzMEU5XHUzMEE0XHUzMEEyXHUzMEYzXHUzMEM4XHUzMDkyXHU2QzdBXHUzMDgxXHUzMDhCXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VycmVudENsaWVudCgpIHtcclxuICBjb25zdCBub3dUaW1lID0gRGF0ZS5ub3coKTtcclxuICBmb3IgKGNvbnN0IGMgb2YgY2xpZW50TGlzdCkge1xyXG4gICAgLy8gXHU0RjdGXHU3NTI4XHU1NkRFXHU2NTcwXHUzMDRDMFx1NTZERVx1MzA2QVx1MzA4OVx1NjcwMFx1NTEyQVx1NTE0OFxyXG4gICAgaWYgKGMuY291bnQgPT09IDApIHJldHVybiBjO1xyXG4gICAgLy8gXHUzMEVDXHUzMEZDXHUzMEM4XHU1MjM2XHU5NjUwXHU2NkY0XHU2NUIwXHU2NjQyXHU5NTkzXHUzMDkyXHU5MDRFXHUzMDRFXHUzMDY2XHUzMDQ0XHUzMDhCXHUzMDZBXHUzMDg5XHU1MTJBXHU1MTQ4XHJcbiAgICBpZiAoYy5yZXNldFRpbWUgPCBub3dUaW1lKSByZXR1cm4gYztcclxuICB9XHJcbiAgLy8gMS4gXHUzMEVDXHUzMEZDXHUzMEM4XHU1MjM2XHU5NjUwXHUzMDdFXHUzMDY3XHUzMDZFXHU1NkRFXHU2NTcwXHUzMDZCXHU0RjU5XHU4OEQ1XHUzMDRDXHUzMDQyXHUzMDhCXHJcbiAgLy8gMi4gXHU0RjdGXHU3NTI4XHUzMDY3XHUzMDREXHUzMDhCXHU5NTkzXHU5Njk0XHUzMDRDXHUzMDg4XHUzMDhBXHU3N0VEXHUzMDQ0XHJcbiAgY2xpZW50TGlzdFxyXG4gICAgLnNvcnQoKGEsIGIpID0+IGdldFNjb3JlKGEpIC0gZ2V0U2NvcmUoYikpXHJcbiAgICAuc29ydCgoYSwgYikgPT4gYi5saW1pdCAtIGEubGltaXQpO1xyXG5cclxuICByZXR1cm4gY2xpZW50TGlzdFswXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFx1MzBDNFx1MzBBNFx1NjU1MVx1NjNGNFx1MzBDNFx1MzBBNFx1MzBGQ1x1MzBDOFx1MzA5Mlx1NjkxQ1x1N0QyMlx1MzA1OVx1MzA4QlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFR3ZWV0KCk6IFByb21pc2U8UmF3UmFpZFR3ZWV0W10gfCBudWxsPiB7XHJcbiAgY29uc3QgY2xpZW50ID0gZ2V0Q3VycmVudENsaWVudCgpO1xyXG4gIGNvbnN0IGNJbmRleCA9IGNsaWVudExpc3QuaW5kZXhPZihjbGllbnQpO1xyXG4gIGNvbnNvbGUubG9nKFxyXG4gICAgZ2V0VGltZXN0YW1wKCksXHJcbiAgICBjbGllbnQudHdpdHRlcklkLFxyXG4gICAgJ2NvdW50OicgKyBjbGllbnQuY291bnQsXHJcbiAgICAnbGltaXQ6JyArIGNsaWVudC5saW1pdFxyXG4gICk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCB0d2l0UmVzID0gYXdhaXQgdjFTZWFyY2hUd2VldHMoY2xpZW50LnR3aXQsIGdldFNlYXJjaFBhcmFtKHNpbmNlX2lkKSk7XHJcblxyXG4gICAgc2luY2VfaWQgPSB0d2l0UmVzLmRhdGEuc2VhcmNoX21ldGFkYXRhLm1heF9pZDtcclxuXHJcbiAgICAvLyBcdTMwQUZcdTMwRTlcdTMwQTRcdTMwQTJcdTMwRjNcdTMwQzhcdTMwNkVcdTYwQzVcdTU4MzFcdTY2RjRcdTY1QjBcclxuICAgIGNsaWVudExpc3RbY0luZGV4XS5saW1pdCA9IHR3aXRSZXMucmF0ZUxpbWl0Py5yZW1haW5pbmcgPz8gMDtcclxuICAgIGNsaWVudExpc3RbY0luZGV4XS5yZXNldFRpbWUgPVxyXG4gICAgICAodHdpdFJlcy5yYXRlTGltaXQ/LnJlc2V0ID8/IERhdGUubm93KCkgLyAxMDAwKSAqIDEwMDA7XHJcbiAgICBjbGllbnRMaXN0W2NJbmRleF0uY291bnQrKztcclxuXHJcbiAgICByZXR1cm4gdHdpdFJlcy5kYXRhLnN0YXR1c2VzLmZsYXRNYXAoKHR3ZWV0KTogUmF3UmFpZFR3ZWV0W10gPT4ge1xyXG4gICAgICBjb25zdCBnYnNUd2VldCA9IHBhcnNlKHR3ZWV0LnRleHQpO1xyXG4gICAgICBpZiAoIWdic1R3ZWV0KSByZXR1cm4gW107XHJcblxyXG4gICAgICByZXR1cm4gW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIGJhdHRsZV9pZDogZ2JzVHdlZXQuYmF0dGxlSWQsXHJcbiAgICAgICAgICBlbmVteV9uYW1lOiBnYnNUd2VldC5lbmVteU5hbWUsXHJcbiAgICAgICAgICBsYW5ndWFnZTogZ2JzVHdlZXQubGFuZ3VhZ2UsXHJcbiAgICAgICAgICBsZXZlbDogZ2JzVHdlZXQubGV2ZWwsXHJcbiAgICAgICAgICBuYW1lOiB0d2VldC51c2VyLm5hbWUsXHJcbiAgICAgICAgICBzY3JlZW5fbmFtZTogdHdlZXQudXNlci5zY3JlZW5fbmFtZSxcclxuICAgICAgICAgIHVzZXJfaWQ6IHR3ZWV0LnVzZXIuaWQsXHJcbiAgICAgICAgICB0d2VldF9pZDogdHdlZXQuaWQsXHJcbiAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSh0d2VldC5jcmVhdGVkX2F0KS5nZXRUaW1lKCksXHJcbiAgICAgICAgICBjb21tZW50OiBnYnNUd2VldC5jb21tZW50LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIF07XHJcbiAgICB9KTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnN0IGVycm9ycyA9IFR3aXR0ZXJBcGkuZ2V0RXJyb3JzKGVycik7XHJcbiAgICBmb3IgKGNvbnN0IGUgb2YgZXJyb3JzKSB7XHJcbiAgICAgIGlmIChpc0Vycm9yVjEoZSkpIHtcclxuICAgICAgICBpZiAoZS5jb2RlID09PSA4OSkge1xyXG4gICAgICAgICAgLy8gJ0ludmFsaWQgb3IgZXhwaXJlZCB0b2tlbi4nXHJcbiAgICAgICAgICBhd2FpdCBkaXNhYmxlQ2xpZW50KGNJbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZ2V0VGltZXN0YW1wKCksIGUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBcdTMwQUZcdTMwRTlcdTMwQTRcdTMwQTJcdTMwRjNcdTMwQzhcdTMwOTJcdTcxMjFcdTUyQjlcdTMwNkJcdTMwNTlcdTMwOEJcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaXNhYmxlQ2xpZW50KGluZGV4OiBudW1iZXIpIHtcclxuICBjb25zdCBjbGllbnQgPSBjbGllbnRMaXN0W2luZGV4XTtcclxuICBpZiAoIWNsaWVudCkgcmV0dXJuIGZhbHNlO1xyXG4gIC8vIGNsaWVudExpc3RcdTMwNEJcdTMwODlcdTUyNEFcdTk2NjRcclxuICBjbGllbnRMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgLy8gREJcdTMwOTJcdTY2RjRcdTY1QjBcclxuICBhd2FpdCBkZWxldGVPQXV0aEZpZWxkKGNsaWVudC50d2l0dGVySWQpO1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogXHUzMEFGXHUzMEU5XHUzMEE0XHUzMEEyXHUzMEYzXHUzMEM4XHUzMDkyXHU1MjFEXHU2NzFGXHU1MzE2XHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdENsaWVudExpc3QoKSB7XHJcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBnZXRBY3RpdmVUb2tlbk1hbnkoKTtcclxuICBjbGllbnRMaXN0ID0gdXNlcnMubWFwKCh1c2VyKSA9PiB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0d2l0OiBuZXcgVHdpdHRlckFwaSh7XHJcbiAgICAgICAgYXBwS2V5OiBlbnYuQ09OU1VNRVJfS0VZLFxyXG4gICAgICAgIGFwcFNlY3JldDogZW52LkNPTlNVTUVSX1NFQ1JFVCxcclxuICAgICAgICBhY2Nlc3NUb2tlbjogdXNlci5vYXV0aFRva2VuISxcclxuICAgICAgICBhY2Nlc3NTZWNyZXQ6IHVzZXIub2F1dGhUb2tlblNlY3JldCEsXHJcbiAgICAgIH0pLFxyXG4gICAgICB0d2l0dGVySWQ6IHVzZXIudHdpdHRlcklkLFxyXG4gICAgICAvLyBcdTY3MDBcdTU5MjdcdTUwMjRcdTMwOTJcdTUyMURcdTY3MUZcdTUwMjRcdTMwNkJcdTMwNTlcdTMwOEJcclxuICAgICAgbGltaXQ6IDE4MCxcclxuICAgICAgcmVzZXRUaW1lOiBEYXRlLm5vdygpICsgMTAwMCAqIDYwICogMTUsXHJcbiAgICAgIGNvdW50OiAwLFxyXG4gICAgfTtcclxuICB9KTtcclxufVxyXG4iLCAiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xyXG5jb25zdCBwcmlzbWEgPSBuZXcgUHJpc21hQ2xpZW50KCk7XHJcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICd1dWlkJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2Vyc0Zyb21TZXNzaW9uKHNlc3Npb25Ub2tlbjogc3RyaW5nKSB7XHJcbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IHByaXNtYS5zZXNzaW9uLmZpbmRVbmlxdWUoe1xyXG4gICAgd2hlcmU6IHsgc2Vzc2lvblRva2VuIH0sXHJcbiAgICBpbmNsdWRlOiB7IHVzZXI6IHRydWUgfSxcclxuICB9KTtcclxuICBpZiAoIXNlc3Npb24pIHJldHVybiBudWxsO1xyXG4gIGlmIChzZXNzaW9uLmV4cGlyZXMgPD0gbmV3IERhdGUoKSkge1xyXG4gICAgYXdhaXQgcHJpc21hLnNlc3Npb24uZGVsZXRlTWFueSh7XHJcbiAgICAgIHdoZXJlOiB7IGlkOiBzZXNzaW9uLmlkIH0sXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuICBpZiAoIXNlc3Npb24udXNlci5vYXV0aFRva2VuIHx8ICFzZXNzaW9uLnVzZXIub2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG4gIHJldHVybiBzZXNzaW9uLnVzZXI7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZVNlc3Npb25Ub2tlbih1c2VySWQ6IHN0cmluZykge1xyXG4gIGNvbnN0IHNlc3Npb25Ub2tlbiA9IHV1aWQoKTtcclxuICBjb25zdCBleHBpcmVzID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDEwMDAgKiA2MCAqIDYwICogMTIpO1xyXG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBwcmlzbWEuc2Vzc2lvbi5jcmVhdGUoe1xyXG4gICAgZGF0YToge1xyXG4gICAgICBzZXNzaW9uVG9rZW4sXHJcbiAgICAgIGV4cGlyZXMsXHJcbiAgICAgIHVzZXI6IHsgY29ubmVjdDogeyBpZDogdXNlcklkIH0gfSxcclxuICAgIH0sXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHNlc3Npb247XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTZXNzaW9uKHNlc3Npb25Ub2tlbjogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIHByaXNtYS5zZXNzaW9uLmRlbGV0ZU1hbnkoe1xyXG4gICAgd2hlcmU6IHsgc2Vzc2lvblRva2VuIH0sXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b2dnbGVBY3RpdmUodXNlcklkOiBzdHJpbmcsIGlzQWN0aXZlOiBib29sZWFuKSB7XHJcbiAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlTWFueSh7XHJcbiAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXHJcbiAgICBkYXRhOiB7IGlzQWN0aXZlIH0sXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVPQXV0aEZpZWxkKHR3aXR0ZXJJZDogc3RyaW5nKSB7XHJcbiAgYXdhaXQgcHJpc21hLnVzZXIudXBkYXRlTWFueSh7XHJcbiAgICB3aGVyZTogeyB0d2l0dGVySWQgfSxcclxuICAgIGRhdGE6IHtcclxuICAgICAgb2F1dGhUb2tlbjogbnVsbCxcclxuICAgICAgb2F1dGhUb2tlblNlY3JldDogbnVsbCxcclxuICAgICAgaXNBY3RpdmU6IGZhbHNlLFxyXG4gICAgfSxcclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydFVzZXIoe1xyXG4gIHR3aXR0ZXJJZCxcclxuICBzY3JlZW5OYW1lLFxyXG4gIG9hdXRoVG9rZW4sXHJcbiAgb2F1dGhUb2tlblNlY3JldCxcclxufToge1xyXG4gIHR3aXR0ZXJJZDogc3RyaW5nO1xyXG4gIHNjcmVlbk5hbWU6IHN0cmluZztcclxuICBvYXV0aFRva2VuOiBzdHJpbmc7XHJcbiAgb2F1dGhUb2tlblNlY3JldDogc3RyaW5nO1xyXG59KSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLnVwc2VydCh7XHJcbiAgICB3aGVyZTogeyB0d2l0dGVySWQgfSxcclxuICAgIHVwZGF0ZToge1xyXG4gICAgICBzY3JlZW5OYW1lLFxyXG4gICAgICBvYXV0aFRva2VuLFxyXG4gICAgICBvYXV0aFRva2VuU2VjcmV0LFxyXG4gICAgfSxcclxuICAgIGNyZWF0ZToge1xyXG4gICAgICB0d2l0dGVySWQsXHJcbiAgICAgIHNjcmVlbk5hbWUsXHJcbiAgICAgIG9hdXRoVG9rZW4sXHJcbiAgICAgIG9hdXRoVG9rZW5TZWNyZXQsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlVXNlckNvdW50KCkge1xyXG4gIGNvbnN0IGNvdW50ID0gYXdhaXQgcHJpc21hLnVzZXIuY291bnQoe1xyXG4gICAgd2hlcmU6IHtcclxuICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICAgIG9hdXRoVG9rZW46IHsgbm90OiBudWxsIH0sXHJcbiAgICAgIG9hdXRoVG9rZW5TZWNyZXQ6IHsgbm90OiBudWxsIH0sXHJcbiAgICB9LFxyXG4gIH0pO1xyXG4gIHJldHVybiBjb3VudDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZVRva2VuTWFueSgpIHtcclxuICByZXR1cm4gYXdhaXQgcHJpc21hLnVzZXIuZmluZE1hbnkoe1xyXG4gICAgd2hlcmU6IHtcclxuICAgICAgaXNBY3RpdmU6IHRydWUsXHJcbiAgICAgIG9hdXRoVG9rZW46IHsgbm90OiBudWxsIH0sXHJcbiAgICAgIG9hdXRoVG9rZW5TZWNyZXQ6IHsgbm90OiBudWxsIH0sXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFBQSxTQUFTLFNBQVM7QUFDbEIsWUFBWSxZQUFZO0FBQ2pCLGNBQU87QUFF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